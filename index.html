<!doctype html>
<html>
  <head>
    <style>
      body{
        margin:0;
        padding: 0;
      }
      #dimage{
        width: 100%;
        height: 100%;
        transform: rotate(-90deg);
      }
    </style>
  </head>
  <body>
    <img id="dimage" src="/pi.jpg?u=YWRtaW4=&p=TFNLKigzaG5C">
    <script>
      var dom = document.getElementById('dimage');
      var updating = false;
      function updateImage(){
        if (!updating){
          var req = new XMLHttpRequest();
          var r = parseInt(Math.random()*100);
          updating = true
          req.open('GET', '/pi.jpg?u=YWRtaW4=&p=TFNLKigzaG5C&r=' + r, true);
          req.responseType = 'arraybuffer';
          req.onload = function(e){
            var arr = new Uint8Array(this.response);
            var raw = String.fromCharCode.apply(null, arr);
            var b64 = btoa(raw);
            dom.src = "data:image/jpeg;base64," + b64;
            updating = false;
          }
          req.send();
        }
      }
      setInterval(updateImage, 1500);
    </script>
  </body>
</html>
      <!-- var img = document.getElementById('dimage'); -->
      <!-- var updateInterval = 3000; -->
      <!-- setInterval(function(){ -->
      <!--   var r = parseInt(Math.random()*100); -->
      <!--   img.src = '/parking.jpg?r=' + r; -->
      <!-- }, updateInterval); -->
